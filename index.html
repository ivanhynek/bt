<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Test z biologie - Gener√°tor test≈Ø</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { 
      font-family: Arial, sans-serif; 
      background: linear-gradient(to bottom right, #eff6ff, #e0e7ff);
      min-height: 100vh;
      padding: 24px;
    }
    .container { max-width: 800px; margin: 0 auto; }
    .card { 
      background: white; 
      border-radius: 16px; 
      box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1); 
      padding: 32px; 
      margin-bottom: 24px; 
    }
    .card-small { padding: 24px; border-radius: 12px; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1); }
    h1 { 
      font-size: 28px; 
      font-weight: bold; 
      color: #1f2937; 
      margin-bottom: 24px; 
      text-align: center; 
    }
    h2 { font-size: 20px; font-weight: bold; color: #1f2937; margin-bottom: 16px; }
    .info-box { 
      background: #eff6ff; 
      border-radius: 8px; 
      padding: 16px; 
      margin-bottom: 24px; 
    }
    .info-box p { font-size: 14px; color: #374151; }
    .form-group { margin-bottom: 16px; }
    .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
    label { 
      display: block; 
      font-size: 14px; 
      font-weight: 500; 
      color: #374151; 
      margin-bottom: 4px; 
    }
    input[type="text"], input[type="email"], input[type="date"], input[type="number"], textarea {
      width: 100%;
      padding: 10px 12px;
      border: 2px solid #d1d5db;
      border-radius: 8px;
      outline: none;
      font-size: 14px;
      font-family: inherit;
    }
    input[type="number"] { width: 80px; }
    textarea { 
      min-height: 80px; 
      resize: vertical;
      border-color: #e5e7eb;
    }
    .btn {
      padding: 12px 24px;
      border-radius: 8px;
      font-weight: 500;
      border: none;
      cursor: pointer;
      box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1);
      font-size: 14px;
    }
    .btn-primary {
      background: linear-gradient(to right, #3b82f6, #6366f1);
      color: white;
    }
    .btn-success {
      background: linear-gradient(to right, #10b981, #059669);
      color: white;
      padding: 14px 40px;
      font-weight: 600;
      font-size: 16px;
    }
    .btn:disabled {
      background: #d1d5db;
      cursor: not-allowed;
    }
    .center { text-align: center; }
    .flex-center { 
      display: flex; 
      flex-direction: column; 
      gap: 16px; 
      align-items: center; 
    }
    .question-card { 
      background: white; 
      border-radius: 12px; 
      box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1); 
      padding: 24px; 
      margin-bottom: 16px;
    }
    .question-header { display: flex; gap: 12px; margin-bottom: 12px; }
    .question-number {
      background: #3b82f6;
      color: white;
      padding: 4px 12px;
      border-radius: 9999px;
      font-size: 14px;
      font-weight: bold;
      flex-shrink: 0;
    }
    .question-title { font-size: 18px; font-weight: 600; color: #1f2937; }
    .question-section { font-size: 12px; color: #9ca3af; margin-top: 4px; }
    .answer-area { margin-left: 48px; }
    .answer-label { font-size: 14px; color: #6b7280; margin-bottom: 4px; }
    .warning {
      background: #fef3c7;
      border: 2px solid #fbbf24;
      border-radius: 8px;
      padding: 12px;
      text-align: center;
      margin-top: 16px;
    }
    .warning p { color: #92400e; font-size: 14px; }
    .instruction-box {
      background: #dbeafe;
      border-radius: 8px;
      padding: 16px;
      margin-bottom: 16px;
    }
    .instruction-box p {
      font-size: 14px;
      color: #1e40af;
      line-height: 1.5;
    }
    .hidden { display: none; }
    .bg-decoration {
      position: absolute;
      opacity: 0.05;
      pointer-events: none;
    }
    .decoration-1 { top: -50px; right: -50px; }
    .decoration-2 { bottom: -30px; left: -30px; }
    .relative { position: relative; }
    .overflow-hidden { overflow: hidden; }
    .z-1 { position: relative; z-index: 1; }
  </style>
</head>
<body>
  <div class="container">
    <div class="card">
      <div class="relative overflow-hidden">
        <svg class="bg-decoration decoration-1" width="300" height="300" viewBox="0 0 200 200">
          <path d="M50,20 Q60,40 50,60 Q40,80 50,100 Q60,120 50,140 Q40,160 50,180" stroke="#3b82f6" stroke-width="4" fill="none"/>
          <path d="M70,20 Q60,40 70,60 Q80,80 70,100 Q60,120 70,140 Q80,160 70,180" stroke="#3b82f6" stroke-width="4" fill="none"/>
          <line x1="50" y1="30" x2="70" y2="30" stroke="#6366f1" stroke-width="2"/>
          <line x1="50" y1="50" x2="70" y2="50" stroke="#6366f1" stroke-width="2"/>
          <circle cx="140" cy="100" r="40" stroke="#10b981" stroke-width="3" fill="none"/>
        </svg>
        
        <h1 class="z-1">üìö Test z biologie</h1>
        
        <div class="info-box z-1">
          <p>Celkem v datab√°zi: <strong id="totalQuestions">215 ot√°zek</strong> z 11 sekc√≠</p>
        </div>

        <div class="flex-center z-1">
          <div style="display: flex; align-items: center; gap: 12px;">
            <label>Poƒçet ot√°zek:</label>
            <input type="number" id="questionCount" value="30" min="1" max="215">
          </div>
          
          <button class="btn btn-primary" onclick="generateQuiz()">
            üß¨ Vygenerovat test
          </button>
        </div>
      </div>
    </div>

    <div id="studentForm" class="card hidden">
      <h2>üë§ Informace o studentovi</h2>
      
      <div class="form-group">
        <label>Jm√©no a p≈ô√≠jmen√≠:</label>
        <input type="text" id="studentName" placeholder="Jan Nov√°k">
      </div>
      
      <div class="form-row">
        <div class="form-group">
          <label>T≈ô√≠da:</label>
          <input type="text" id="studentClass" placeholder="3.A">
        </div>
        
        <div class="form-group">
          <label>Datum:</label>
          <input type="date" id="testDate">
        </div>
      </div>
      
      <div class="form-group">
        <label>Email uƒçitele:</label>
        <input type="email" id="teacherEmail" placeholder="ucitel@skola.cz">
      </div>
    </div>

    <div id="questionsContainer"></div>

    <div id="downloadSection" class="card-small hidden" style="background: white; margin-bottom: 16px;">
      <div class="instruction-box">
        <p>
          üìß <strong>Jak odeslat test:</strong><br>
          1. Klikni na "St√°hnout test"<br>
          2. Otev≈ôi sv≈Øj email<br>
          3. Napi≈° email na: <strong id="emailDisplay">zadej email uƒçitele v√Ω≈°e</strong><br>
          4. P≈ôilo≈æ sta≈æen√Ω soubor<br>
          5. Ode≈°li email
        </p>
      </div>
      
      <div class="center">
        <button class="btn btn-success" id="downloadBtn" onclick="downloadTest()">
          ‚¨áÔ∏è St√°hnout test
        </button>
      </div>
    </div>

    <div id="warningSection" class="hidden">
      <div class="warning">
        <p>‚ö†Ô∏è Pro sta≈æen√≠ testu vypl≈à jm√©no a t≈ô√≠du</p>
      </div>
    </div>

    <div id="emptyState" class="card center" style="padding: 48px;">
      <p style="color: #9ca3af; font-size: 18px;">
        Klikni na tlaƒç√≠tko v√Ω≈°e pro vygenerov√°n√≠ testu
      </p>
    </div>
  </div>

  <script>
    const questionsDatabase = {
      "Opƒõrn√° soustava": [
        { q: "Opƒõrn√° soustava", a: "soubor kost√≠, chrupavek a vaz≈Ø, kter√© tvo≈ô√≠ oporu tƒõla a chr√°n√≠ org√°ny" },
        { q: "Skelet", a: "kostra -- soubor v≈°ech kost√≠ lidsk√©ho tƒõla (cca 206)" },
        { q: "Kloub", a: "pohybliv√© spojen√≠ dvou kost√≠" },
        { q: "Kloubn√≠ chrupavka", a: "hladk√Ω povrch kost√≠ v kloubu, umo≈æ≈àuje hladk√Ω pohyb" },
        { q: "Vazy", a: "p√°sy vaziva spojuj√≠c√≠ kosti mezi sebou, zpev≈àuj√≠ kloub" },
        { q: "≈†lachy", a: "spojuj√≠ svaly s kostmi" },
        { q: "Lebka", a: "kostƒõn√° schr√°nka chr√°n√≠c√≠ mozek a smyslov√© org√°ny" },
        { q: "P√°te≈ô", a: "osa tƒõla slo≈æen√° z obratl≈Ø, umo≈æ≈àuje vzp≈ô√≠men√© dr≈æen√≠ tƒõla" },
        { q: "Obratel", a: "z√°kladn√≠ kostn√≠ jednotka p√°te≈ôe, skl√°d√° se z tƒõla, oblouku a v√Ωbƒõ≈æk≈Ø" },
        { q: "P√°te≈ôn√≠ kan√°l", a: "otvor v obratlech, j√≠m≈æ proch√°z√≠ m√≠cha" },
        { q: "Meziobratlov√© plot√©nky", a: "chrupavƒçit√© destiƒçky mezi obratli, tlum√≠ n√°razy" },
        { q: "Hrudn√≠k", a: "kostƒõn√Ω r√°mec tvo≈ôen√Ω hrudn√≠ kost√≠, ≈æebry a hrudn√≠ p√°te≈ô√≠" },
        { q: "Kostn√≠ d≈ôe≈à", a: "tk√°≈à uvnit≈ô kost√≠ -- ƒçerven√° (krvetvorba), ≈ælut√° (tukov√°)" },
        { q: "Krvetvorba (hemopoeza)", a: "proces tvorby krvinek v ƒçerven√© kostn√≠ d≈ôeni" },
        { q: "Horn√≠ konƒçetina", a: "pa≈æn√≠ kost, loketn√≠ kost, v≈ôetenn√≠ kost, z√°pƒõstn√≠ a z√°prstn√≠ k≈Østky, ƒçl√°nky prst≈Ø" },
        { q: "Doln√≠ konƒçetina", a: "stehenn√≠ kost, ƒç√©≈°ka, holenn√≠ kost, l√Ωtkov√° kost, z√°n√°rtn√≠ a n√°rtn√≠ k≈Østky, ƒçl√°nky prst≈Ø" }
      ],
      "Svalov√° soustava": [
        { q: "Svalov√° tk√°≈à", a: "tk√°≈à tvo≈ôen√° bu≈àkami schopn√Ωmi stahu, umo≈æ≈àuje pohyb tƒõla a org√°n≈Ø" },
        { q: "P≈ô√≠ƒçnƒõ pruhovan√© svalstvo", a: "svalstvo ovl√°dan√© v≈Øl√≠, tvo≈ô√≠ kostern√≠ svaly" },
        { q: "Srdeƒçn√≠ svalstvo", a: "zvl√°≈°tn√≠ typ p≈ô√≠ƒçnƒõ pruhovan√©ho svalstva, tvo≈ô√≠ srdce, nen√≠ ovl√°d√°no v≈Øl√≠" },
        { q: "Hladk√© svalstvo", a: "svalstvo vnit≈ôn√≠ch org√°n≈Ø, nen√≠ ovl√°d√°no v≈Øl√≠" },
        { q: "Sval", a: "org√°n schopn√Ω aktivn√≠ho stahu, tvo≈ôen√Ω svalovou tk√°n√≠" },
        { q: "Svalov√© vl√°kno", a: "z√°kladn√≠ stavebn√≠ a funkƒçn√≠ jednotka kostern√≠ho svalu" },
        { q: "Myofibrily", a: "vl√°k√©nka uvnit≈ô svalov√©ho vl√°kna, tvo≈ôen√° aktinem a myosinem" },
        { q: "Nervosvalov√° plot√©nka", a: "m√≠sto kontaktu motorick√©ho nervu se svalov√Ωm vl√°knem, p≈ôen√°≈°√≠ vzruch" },
        { q: "Synergista", a: "sval, kter√Ω pom√°h√° hlavn√≠mu svalu p≈ôi pohybu" },
        { q: "Antagonista", a: "sval p≈Øsob√≠c√≠ opaƒçnƒõ ne≈æ jin√Ω sval" },
        { q: "Flexor", a: "oh√Ωbaƒç -- sval, kter√Ω umo≈æ≈àuje ohyb kloubu" },
        { q: "Extenzor", a: "natahovaƒç -- sval, kter√Ω umo≈æ≈àuje nata≈æen√≠ kloubu" },
        { q: "Svaly horn√≠ konƒçetiny", a: "svaly p≈ôedlokt√≠, biceps, triceps, deltov√Ω" },
        { q: "Svaly doln√≠ konƒçetiny", a: "ƒçty≈ôhlav√Ω stehenn√≠, svaly zadn√≠ strany stehna, trojhlav√Ω l√Ωtkov√Ω, svaly nohy" },
        { q: "Svaly hlavy a trupu", a: "trap√©zov√Ω sval, ≈°irok√Ω z√°dov√Ω, svaly mezilopatkov√©, ƒçeln√≠, ≈æv√Ωkac√≠, sp√°nkov√©, okcipit√°ln√≠, kruhov√Ω √∫stn√≠ svƒõraƒç" }
      ],
      "Krevn√≠ a lymfatick√° soustava": [
        { q: "Homeost√°za", a: "schopnost tƒõla udr≈æovat stabiln√≠ vnit≈ôn√≠ prost≈ôed√≠" },
        { q: "Krev", a: "tekut√° pojivov√° tk√°≈à p≈ôen√°≈°ej√≠c√≠ kysl√≠k, ≈æiviny a odpadn√≠ l√°tky" },
        { q: "Lymfa", a: "tekutina cirkuluj√≠c√≠ v lymfatick√© soustavƒõ, pod√≠l√≠ se na obranƒõ organismu a transportu l√°tek" },
        { q: "Lymfatick√© c√©vy", a: "c√©vy vedouc√≠ lymfu z tk√°n√≠ zpƒõt do ≈æiln√≠ho ≈ôeƒçi≈°tƒõ" },
        { q: "Lymfatick√© uzliny", a: "filtry lymfatick√©ho syst√©mu, m√≠sto tvorby lymfocyt≈Ø" },
        { q: "Hematologie", a: "vƒõdn√≠ obor zab√Ωvaj√≠c√≠ se studiem krve a krevotvorn√Ωch org√°n≈Ø" },
        { q: "Glykemie", a: "koncentrace gluk√≥zy v krvi" },
        { q: "Krevn√≠ obraz", a: "laboratorn√≠ vy≈°et≈ôen√≠ poƒçtu a pomƒõru krevn√≠ch bunƒõk" },
        { q: "Erytrocyty", a: "ƒçerven√© krvinky p≈ôen√°≈°ej√≠c√≠ kysl√≠k a ƒç√°st oxidu uhliƒçit√©ho" },
        { q: "Leukocyty", a: "b√≠l√© krvinky pod√≠lej√≠c√≠ se na imunitn√≠ obranƒõ organismu" },
        { q: "Trombocyty", a: "krevn√≠ destiƒçky pod√≠lej√≠c√≠ se na sr√°≈æen√≠ krve" },
        { q: "Hemoglobin", a: "ƒçerven√© barvivo z hemu a globinu, v√°≈æe a p≈ôen√°≈°√≠ kysl√≠k" },
        { q: "Hematokryt", a: "procentu√°ln√≠ zastoupen√≠ ƒçerven√Ωch krvinek v krvi" },
        { q: "Sedimentace", a: "usazov√°n√≠ erytrocyt≈Ø ve zkumavce, indik√°tor z√°nƒõtu" },
        { q: "Diaped√©za", a: "schopnost leukocyt≈Ø prostupovat c√©vn√≠ stƒõnou do tk√°n√≠" },
        { q: "Hemost√°ze", a: "soubor proces≈Ø zaji≈°≈•uj√≠c√≠ch zastaven√≠ krv√°cen√≠" },
        { q: "Embolie", a: "ucp√°n√≠ c√©vy trombem nebo jinou l√°tkou p≈ôenesenou krv√≠" },
        { q: "An√©mie", a: "sn√≠≈æen√Ω poƒçet erytrocyt≈Ø nebo hemoglobinu, zp≈Øsobuj√≠c√≠ √∫navu a slabost" },
        { q: "Leuk√©mie", a: "zhoubn√© onemocnƒõn√≠ krvetvorby charakterizovan√© nadprodukc√≠ leukocyt≈Ø" }
      ],
      "Obƒõhov√° soustava": [
        { q: "Srdce", a: "dut√Ω svalov√Ω org√°n pumpuj√≠c√≠ krev do tƒõla" },
        { q: "Myokard", a: "svalovina srdeƒçn√≠ stƒõny, umo≈æ≈àuje stahy srdce" },
        { q: "Srdeƒçn√≠ s√≠nƒõ a komory", a: "s√≠nƒõ p≈ôij√≠maj√≠ krev, komory ji vypuzuj√≠" },
        { q: "Chlopnƒõ", a: "zabra≈àuj√≠ zpƒõtn√©mu toku krve (dvojc√≠p√° a trojc√≠p√°)" },
        { q: "Aorta", a: "hlavn√≠ tepna vedouc√≠ krev ze srdce do tƒõla" },
        { q: "Plicnice", a: "vede odkysliƒçenou krev do plic" },
        { q: "Systola", a: "stah srdeƒçn√≠ch sval≈Ø" },
        { q: "Diastola", a: "uvolnƒõn√≠ srdeƒçn√≠ch sval≈Ø" },
        { q: "Koron√°rn√≠ tepny", a: "z√°sobuj√≠ srdce krv√≠" },
        { q: "Mal√Ω obƒõh", a: "krevn√≠ obƒõh mezi srdcem a pl√≠cemi" },
        { q: "Velk√Ω obƒõh", a: "krevn√≠ obƒõh mezi srdcem a tƒõlem" },
        { q: "Horn√≠ a doln√≠ dut√° ≈æ√≠la", a: "p≈ôiv√°dƒõj√≠ odkysliƒçenou krev do prav√© s√≠nƒõ" },
        { q: "EKG", a: "z√°znam elektrick√© aktivity srdce" },
        { q: "Tepny", a: "c√©vy vedouc√≠ krev ze srdce, maj√≠ silnou svalovou stƒõnu" },
        { q: "≈Ω√≠ly", a: "c√©vy vedouc√≠ krev do srdce, maj√≠ chlopnƒõ proti zpƒõtn√©mu toku" }
      ],
      "Tr√°vic√≠ soustava": [
        { q: "Tr√°vic√≠ soustava", a: "soubor org√°n≈Ø zaji≈°≈•uj√≠c√≠ch p≈ô√≠jem, tr√°ven√≠ a vst≈ôeb√°v√°n√≠ potravy" },
        { q: "Tr√°vic√≠ trubice", a: "dut√Ω org√°n od √∫st po koneƒçn√≠k" },
        { q: "Dutina √∫stn√≠", a: "m√≠sto p≈ô√≠jmu a prvotn√≠ho zpracov√°n√≠ potravy" },
        { q: "Jazyk", a: "org√°n pro manipulaci s potravou a chu≈•" },
        { q: "Zub", a: "org√°n pro mechanick√© zpracov√°n√≠ potravy" },
        { q: "Stavba zubu", a: "korunka, krƒçek, ko≈ôen, zubovina, sklovina, d≈ôe≈à, cement, zubn√≠ jamka" },
        { q: "Typy zub≈Ø", a: "≈ôez√°ky, ≈°piƒç√°ky, t≈ôenov√© zuby, stoliƒçky" },
        { q: "≈Ωaludek", a: "vakovit√Ω org√°n mechanicky a chemicky zpracov√°vaj√≠c√≠ potravu" },
        { q: "Tenk√© st≈ôevo", a: "hlavn√≠ m√≠sto tr√°ven√≠ a vst≈ôeb√°v√°n√≠ ≈æivin" },
        { q: "Tlust√© st≈ôevo", a: "vst≈ôeb√°v√° vodu a soli, tvo≈ô√≠ stolici" },
        { q: "J√°tra", a: "nejvƒõt≈°√≠ ≈æl√°za v lidsk√©m tƒõle, hlavn√≠ centrum metabolick√Ωch proces≈Ø a detoxikace" },
        { q: "Enzymy", a: "pepsin, trypsin, chymotrypsin, amyl√°zy, lip√°zy -- ≈°tƒõp√≠ b√≠lkoviny, polysacharidy a tuky" },
        { q: "Peristaltick√© pohyby", a: "rytmick√© stahy posunuj√≠c√≠ potravu" },
        { q: "Vst≈ôeb√°v√°n√≠", a: "p≈ôechod ≈æivin z tr√°vic√≠ trubice do krve nebo lymfy" },
        { q: "Dvan√°ctn√≠k", a: "prvn√≠ √∫sek tenk√©ho st≈ôeva" },
        { q: "Slinivka b≈ôi≈°n√≠", a: "produkuje tr√°vic√≠ enzymy a hormony" },
        { q: "Defekace", a: "vyprazd≈àov√°n√≠" }
      ],
      "Vyluƒçovac√≠ soustava": [
        { q: "Vyluƒçovac√≠ soustava", a: "soustava org√°n≈Ø tvo≈ô√≠c√≠ch a odv√°dƒõj√≠c√≠ch moƒç" },
        { q: "Ledviny", a: "p√°rov√Ω org√°n filtruj√≠c√≠ krev a tvo≈ô√≠c√≠ moƒç" },
        { q: "Nefron", a: "z√°kladn√≠ funkƒçn√≠ jednotka ledviny" },
        { q: "Glomerulus", a: "s√≠≈• vl√°seƒçnic v nefronu, kde prob√≠h√° filtrace krve" },
        { q: "Bowman≈Øv v√°ƒçek", a: "ƒç√°st nefronu obklopuj√≠c√≠ glomerulus, zachycuje prim√°rn√≠ moƒç" },
        { q: "Tubulus", a: "ƒç√°st nefronu, kde prob√≠h√° zpƒõtn√© vst≈ôeb√°v√°n√≠ l√°tek" },
        { q: "Prim√°rn√≠ moƒç", a: "prvotn√≠ filtr√°t krve obsahuj√≠c√≠ vodu, soli, gluk√≥zu i odpadn√≠ l√°tky" },
        { q: "Sekund√°rn√≠ moƒç", a: "koneƒçn√Ω produkt po zpƒõtn√©m vst≈ôeb√°v√°n√≠ u≈æiteƒçn√Ωch l√°tek" },
        { q: "Moƒçovod", a: "trubice vedouc√≠ moƒç z ledvin do moƒçov√©ho mƒõch√Ω≈ôe" },
        { q: "Moƒçov√Ω mƒõch√Ω≈ô", a: "dut√Ω org√°n doƒçasnƒõ skladuj√≠c√≠ moƒç" },
        { q: "Moƒçov√° trubice", a: "odv√°d√≠ moƒç ven z tƒõla" },
        { q: "Antidiuretick√Ω hormon", a: "hormon z hypotalamu, zadr≈æuje vodu v tƒõle" },
        { q: "Erytropoetin", a: "hormon ledvin podporuj√≠c√≠ tvorbu ƒçerven√Ωch krvinek" },
        { q: "Ledvinov√© kameny", a: "ztvrdl√© usazeniny sol√≠ v moƒçov√Ωch cest√°ch" },
        { q: "Moƒçovina", a: "hlavn√≠ koneƒçn√Ω produkt l√°tkov√© p≈ôemƒõny b√≠lkovin" },
        { q: "Kyselina moƒçov√°", a: "koneƒçn√Ω produkt p≈ôemƒõny purin≈Ø" },
        { q: "Kreatinin", a: "odpadn√≠ l√°tka ze svalov√©ho metabolismu" },
        { q: "Dial√Ωza", a: "umƒõl√© ƒçi≈°tƒõn√≠ krve p≈ôi selh√°n√≠ ledvin" },
        { q: "Glomerulonefritida", a: "z√°nƒõt ledvinov√Ωch klub√≠ƒçek" },
        { q: "Inkontinence", a: "neschopnost zadr≈æet moƒç" }
      ],
      "Smyslov√° soustava": [
        { q: "Receptor", a: "bunƒõƒçn√° struktura reaguj√≠c√≠ na podnƒõty" },
        { q: "Oko a stavba oka", a: "org√°n zraku, p≈ôev√°d√≠ svƒõtlo na nervov√© impulsy" },
        { q: "S√≠tnice", a: "obsahuje fotoreceptory, m√≠sto vzniku zrakov√Ωch vjem≈Ø" },
        { q: "Tyƒçinky", a: "fotoreceptory citliv√© na n√≠zkou intenzitu svƒõtla" },
        { q: "ƒå√≠pky", a: "fotoreceptory pro barevn√© vidƒõn√≠" },
        { q: "≈Ωlut√° skvrna", a: "m√≠sto na s√≠tnici s nejvƒõt≈°√≠ koncentrac√≠ ƒç√≠pk≈Ø" },
        { q: "Slep√° skvrna", a: "m√≠sto vstupu zrakov√©ho nervu do oka, bez fotoreceptor≈Ø" },
        { q: "Zrakov√Ω nerv", a: "p≈ôen√°≈°√≠ vizu√°ln√≠ informace do mozku" },
        { q: "Binokul√°rn√≠ vidƒõn√≠", a: "vidƒõn√≠ obƒõma oƒçima, prostorov√© vn√≠m√°n√≠" },
        { q: "Okohybn√© svaly", a: "umo≈æ≈àuj√≠ pohyb oka" },
        { q: "Ucho a stavba ucha", a: "org√°n sluchu a rovnov√°hy" },
        { q: "Bub√≠nek", a: "bl√°na oddƒõluj√≠c√≠ vnƒõj≈°√≠ a st≈ôedn√≠ ucho" },
        { q: "Sluchov√© k≈Østky", a: "klad√≠vko, kovadlinka a t≈ôm√≠nek ve st≈ôedn√≠m uchu" },
        { q: "Perilymfa a endolymfa", a: "tekutiny uvnit≈ô labyrintu" },
        { q: "Hlem√Ω≈æƒè", a: "p≈ôev√°d√≠ zvuk na nervov√© impulsy" },
        { q: "Cortiho org√°n", a: "smyslov√Ω org√°n sluchu uvnit≈ô hlem√Ω≈ædƒõ" },
        { q: "Sluchov√Ω nerv", a: "p≈ôen√°≈°√≠ sign√°ly z ucha do mozku" },
        { q: "Statokinetick√© √∫stroj√≠", a: "udr≈æuje rovnov√°hu tƒõla" },
        { q: "Polokruhovit√© kan√°lky", a: "ƒç√°st vnit≈ôn√≠ho ucha registruj√≠c√≠ rotaƒçn√≠ pohyby" },
        { q: "Stavba k≈Ø≈æe", a: "poko≈æka, ≈°k√°ra a podko≈æ√≠" },
        { q: "Chu≈•ov√© poh√°rky", a: "drobn√© struktury na jazyku obsahuj√≠c√≠ chu≈•ov√© bu≈àky" }
      ],
      "Pohlavn√≠ rozmno≈æov√°n√≠": [
        { q: "Pohlavn√≠ rozmno≈æov√°n√≠", a: "rozmno≈æov√°n√≠ zahrnuj√≠c√≠ splynut√≠ dvou pohlavn√≠ch bunƒõk" },
        { q: "Pohlavn√≠ bu≈àka", a: "specializovan√° bu≈àka pro pohlavn√≠ rozmno≈æov√°n√≠" },
        { q: "Spermie", a: "mu≈æsk√° pohlavn√≠ bu≈àka schopn√° oplodnƒõn√≠" },
        { q: "Vaj√≠ƒçko", a: "≈æensk√° pohlavn√≠ bu≈àka schopn√° oplodnƒõn√≠" },
        { q: "Folikul", a: "struktura ve vajeƒçn√≠ku, kde dozr√°v√° vaj√≠ƒçko" },
        { q: "Oplozen√≠", a: "splynut√≠ spermie a vaj√≠ƒçka, vznik zygoty" },
        { q: "Zygota", a: "prvn√≠ bu≈àka vznikl√° splynut√≠m gamet" },
        { q: "Z√°rodek", a: "ran√© stadium v√Ωvoje organismu p≈ôed plodem" },
        { q: "Plod", a: "pokroƒçil√© stadium v√Ωvoje organismu v dƒõloze" },
        { q: "Mei√≥za", a: "dƒõlen√≠ pohlavn√≠ch bunƒõk s redukc√≠ poƒçtu chromozom≈Ø" },
        { q: "Pohlavn√≠ chromozomy", a: "urƒçuj√≠ pohlav√≠ jedince" },
        { q: "Pyj", a: "mu≈æsk√Ω pohlavn√≠ org√°n" },
        { q: "Varlata", a: "mu≈æsk√© pohlavn√≠ ≈æl√°zy produkuj√≠c√≠ spermie" },
        { q: "Vajeƒçn√≠ky", a: "≈æensk√© pohlavn√≠ org√°ny produkuj√≠c√≠ vaj√≠ƒçka" },
        { q: "Vejcovody", a: "trubice vedouc√≠ vaj√≠ƒçko z vajeƒçn√≠ku do dƒõlohy" },
        { q: "Dƒõloha", a: "svalov√Ω org√°n, kde se vyv√≠j√≠ z√°rodek a plod" },
        { q: "Ovulace", a: "uvolnƒõn√≠ zral√©ho vaj√≠ƒçka z vajeƒçn√≠ku" },
        { q: "Menstruaƒçn√≠ cyklus", a: "periodick√© hormon√°ln√≠ zmƒõny u ≈æeny" },
        { q: "Placenta", a: "org√°n vy≈æivuj√≠c√≠ plod" },
        { q: "Pupeƒçn√≠k", a: "propojuje plod s placentou" },
        { q: "Porod", a: "proces vypuzen√≠ plodu z dƒõlohy" }
      ],
      "Endokrinn√≠ soustava": [
        { q: "Endokrinn√≠ ≈æl√°za", a: "vyluƒçuje hormony p≈ô√≠mo do krve" },
        { q: "Endokrinn√≠ soustava", a: "syst√©m ≈æl√°z ≈ô√≠d√≠c√≠ organismus pomoc√≠ hormon≈Ø" },
        { q: "Hormon", a: "chemick√° l√°tka ovliv≈àuj√≠c√≠ ƒçinnost bunƒõk" },
        { q: "Hypotalamus", a: "propojen√≠ s hypof√Ωzou, hlavn√≠ centrum ≈ô√≠zen√≠ hormon≈Ø" },
        { q: "Hypof√Ωza", a: "hlavn√≠ ≈æl√°za endokrinn√≠ soustavy" },
        { q: "Adenohypof√Ωza", a: "produkuje tropn√≠ a r≈Østov√© hormony" },
        { q: "R≈Østov√Ω hormon", a: "podporuje r≈Øst a v√Ωvoj" },
        { q: "FSH", a: "podporuje zr√°n√≠ pohlavn√≠ch bunƒõk" },
        { q: "LH", a: "≈ô√≠d√≠ ovulaci a tvorbu pohlavn√≠ch hormon≈Ø" },
        { q: "Neurohypof√Ωza", a: "zadn√≠ lalok hypof√Ωzy, uvol≈àuje vazopresin a oxytocin" },
        { q: "Vazopresin", a: "sni≈æuje vyluƒçov√°n√≠ vody v ledvin√°ch" },
        { q: "Oxytocin", a: "podporuje stahy dƒõlohy a vyluƒçov√°n√≠ ml√©ka" },
        { q: "≈†t√≠tn√° ≈æl√°za", a: "≈æl√°za produkuj√≠c√≠ hormony ≈ô√≠d√≠c√≠ metabolismus" },
        { q: "Tyroxin", a: "hormon ≈°t√≠tn√© ≈æl√°zy ovliv≈àuj√≠c√≠ metabolismus" },
        { q: "P≈ô√≠≈°t√≠tn√° tƒõl√≠ska", a: "≈ô√≠d√≠ hladinu v√°pn√≠ku" },
        { q: "Nadledviny", a: "≈æl√°zy na ledvin√°ch, tvo≈ô√≠ hormony" },
        { q: "Adrenalin", a: "hormon p≈ôipravuj√≠c√≠ tƒõlo na stresovou reakci" },
        { q: "Kortizol", a: "hormon ≈ô√≠d√≠c√≠ metabolismus a stresovou odpovƒõƒè" },
        { q: "Pankreas", a: "≈æl√°za s vnit≈ôn√≠ sekrec√≠" },
        { q: "Inzulin", a: "hormon sni≈æuj√≠c√≠ hladinu gluk√≥zy v krvi" },
        { q: "Glukagon", a: "hormon zvy≈°uj√≠c√≠ hladinu gluk√≥zy v krvi" }
      ],
      "Nervov√° soustava": [
        { q: "Nervov√° soustava", a: "≈ô√≠d√≠ a koordinuje ƒçinnost organismu" },
        { q: "CNS", a: "mozek a m√≠cha" },
        { q: "Perifern√≠ nervov√Ω syst√©m", a: "nervy spojuj√≠c√≠ CNS s tƒõlem" },
        { q: "Mozek", a: "≈ô√≠dic√≠ centrum tƒõla" },
        { q: "Koncov√Ω mozek", a: "zodpov√≠d√° za my≈°len√≠, pamƒõ≈•, vƒõdom√≠" },
        { q: "Mozkov√Ω kmen", a: "≈ô√≠d√≠ z√°kladn√≠ ≈æivotn√≠ funkce" },
        { q: "Mozeƒçek", a: "koordinuje pohyby a udr≈æuje rovnov√°hu" },
        { q: "M√≠cha", a: "vede vzruchy mezi mozkem a tƒõlem" },
        { q: "Neuron", a: "z√°kladn√≠ jednotka nervov√© soustavy" },
        { q: "Dendrit", a: "p≈ôij√≠m√° vzruchy od jin√Ωch bunƒõk" },
        { q: "Axon", a: "vede vzruch od tƒõla neuronu d√°l" },
        { q: "Myelinov√° pochva", a: "izolaƒçn√≠ vrstva kolem axonu" },
        { q: "Synapse", a: "m√≠sto spojen√≠ dvou neuron≈Ø" },
        { q: "Neurotransmiter", a: "chemick√° l√°tka p≈ôen√°≈°ej√≠c√≠ vzruch" },
        { q: "Reflex", a: "automatick√° reakce tƒõla na podnƒõt" },
        { q: "Reflexn√≠ oblouk", a: "dr√°ha nervov√©ho vzruchu p≈ôi reflexu" },
        { q: "Autonomn√≠ nervov√Ω syst√©m", a: "≈ô√≠d√≠ ƒçinnost org√°n≈Ø nez√°visle na v≈Øli" },
        { q: "Sympatikus", a: "aktivuje tƒõlo p≈ôi stresu" },
        { q: "Parasympatikus", a: "uklid≈àuje tƒõlo, podporuje tr√°ven√≠" },
        { q: "Akƒçn√≠ potenci√°l", a: "kr√°tk√Ω elektrick√Ω impuls" }
      ],
      "Genetika": [
        { q: "Genetika", a: "vƒõda o dƒõdiƒçnosti a promƒõnlivosti" },
        { q: "Gen", a: "√∫sek DNA k√≥duj√≠c√≠ jednu vlastnost" },
        { q: "Alela", a: "jedna z variant genu" },
        { q: "Homozygot", a: "jedinec s dvƒõma stejn√Ωmi alelami" },
        { q: "Heterozygot", a: "jedinec s dvƒõma odli≈°n√Ωmi alelami" },
        { q: "Genotyp", a: "soubor v≈°ech gen≈Ø jedince" },
        { q: "Fenotyp", a: "soubor v≈°ech pozorovateln√Ωch znak≈Ø" },
        { q: "Chromozom", a: "struktura z DNA a b√≠lkovin" },
        { q: "Autosom", a: "chromozom, kter√Ω neurƒçuje pohlav√≠" },
        { q: "Gonozomy", a: "chromozomy urƒçuj√≠c√≠ pohlav√≠" },
        { q: "Mit√≥za", a: "dƒõlen√≠ somatick√Ωch bunƒõk" },
        { q: "Mei√≥za", a: "dƒõlen√≠ pohlavn√≠ch bunƒõk" },
        { q: "Dƒõdiƒçnost", a: "schopnost organism≈Ø p≈ôed√°vat znaky potomstvu" },
        { q: "Mutace", a: "n√°hl√° zmƒõna genetick√© informace" },
        { q: "K≈ô√≠≈æen√≠", a: "kombinace genotyp≈Ø rodiƒç≈Ø" },
        { q: "DNA", a: "nositel genetick√© informace" },
        { q: "RNA", a: "molekula p≈ôenosu genetick√© informace" },
        { q: "Replikace", a: "proces zdvojen√≠ DNA" },
        { q: "Transkripce", a: "p≈ôepis genetick√© informace z DNA na RNA" },
        { q: "Translace", a: "p≈ôeklad genetick√© informace do podoby b√≠lkovin" }
      ]
    };

    let selectedQuestions = [];
    let userAnswers = {};

    // Nastaven√≠ dne≈°n√≠ho data
    document.getElementById('testDate').value = new Date().toISOString().split('T')[0];

    // Event listeners
    document.getElementById('studentName').addEventListener('input', updateDownloadButton);
    document.getElementById('studentClass').addEventListener('input', updateDownloadButton);
    document.getElementById('teacherEmail').addEventListener('input', updateEmailDisplay);

    function generateQuiz() {
      const numberOfQuestions = parseInt(document.getElementById('questionCount').value) || 30;
      const sections = Object.keys(questionsDatabase);
      const totalSections = sections.length;
      const questionsPerSection = Math.floor(numberOfQuestions / totalSections);
      const remainder = numberOfQuestions % totalSections;

      selectedQuestions = [];

      sections.forEach((section, index) => {
        const sectionQuestions = [...questionsDatabase[section]];
        const count = questionsPerSection + (index < remainder ? 1 : 0);
        
        // Shuffle
        for (let i = sectionQuestions.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [sectionQuestions[i], sectionQuestions[j]] = [sectionQuestions[j], sectionQuestions[i]];
        }
        
        const selectedFromSection = sectionQuestions.slice(0, Math.min(count, sectionQuestions.length));
        selectedFromSection.forEach(q => {
          selectedQuestions.push({ ...q, section });
        });
      });

      // Final shuffle
      for (let i = selectedQuestions.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [selectedQuestions[i], selectedQuestions[j]] = [selectedQuestions[j], selectedQuestions[i]];
      }

      userAnswers = {};
      renderQuestions();
      
      document.getElementById('emptyState').classList.add('hidden');
      document.getElementById('studentForm').classList.remove('hidden');
      document.getElementById('downloadSection').classList.remove('hidden');
      updateDownloadButton();
    }

    function renderQuestions() {
      const container = document.getElementById('questionsContainer');
      container.innerHTML = '';

      selectedQuestions.forEach((item, index) => {
        const questionCard = document.createElement('div');
        questionCard.className = 'question-card';
        questionCard.innerHTML = `
          <div class="question-header">
            <span class="question-number">${index + 1}</span>
            <div style="flex: 1;">
              <div class="question-title">${item.q}</div>
              <div class="question-section">(${item.section})</div>
            </div>
          </div>
          <div class="answer-area">
            <label class="answer-label">Odpovƒõƒè:</label>
            <textarea 
              id="answer-${index}" 
              placeholder="Napi≈° zde svou odpovƒõƒè..."
              oninput="updateAnswer(${index}, this.value)"
            ></textarea>
          </div>
        `;
        container.appendChild(questionCard);
      });
    }

    function updateAnswer(index, value) {
      userAnswers[index] = value;
    }

    function updateDownloadButton() {
      const name = document.getElementById('studentName').value.trim();
      const studentClass = document.getElementById('studentClass').value.trim();
      const downloadBtn = document.getElementById('downloadBtn');
      const warningSection = document.getElementById('warningSection');

      if (name && studentClass) {
        downloadBtn.disabled = false;
        warningSection.classList.add('hidden');
      } else {
        downloadBtn.disabled = true;
        warningSection.classList.remove('hidden');
      }
    }

    function updateEmailDisplay() {
      const email = document.getElementById('teacherEmail').value.trim();
      document.getElementById('emailDisplay').textContent = email || 'zadej email uƒçitele v√Ω≈°e';
    }

    function downloadTest() {
      const studentName = document.getElementById('studentName').value;
      const studentClass = document.getElementById('studentClass').value;
      const testDate = document.getElementById('testDate').value;

      let content = `<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <style>
    body { font-family: Arial; font-size: 10pt; line-height: 1.2; margin: 0.5cm; }
    h1 { text-align: center; font-size: 16pt; margin: 5px 0; }
    .header { border-top: 2px solid black; border-bottom: 2px solid black; padding: 5px 0; margin: 8px 0 12px 0; }
    .header p { margin: 2px 0; }
    .question { border-bottom: 1px solid #ccc; padding: 5px 0; margin: 0; }
    .question-text { font-weight: bold; margin: 0 0 3px 0; }
    .answer-field { min-height: 2.4em; border: 1px solid #ddd; padding: 3px; background: #fafafa; margin: 0 0 3px 0; }
    .points { text-align: right; font-weight: bold; color: #c00; font-size: 9pt; margin: 0; }
    .summary { border: 2px solid black; padding: 12px; margin: 15px 0 10px 0; }
    .summary h2 { font-size: 14pt; margin: 0 0 8px 0; }
    .summary p { margin: 4px 0; }
  </style>
</head>
<body>
  <h1>TEST Z BIOLOGIE</h1>
  <div class="header">
    <p><strong>Jm√©no a p≈ô√≠jmen√≠:</strong> ${studentName}</p>
    <p><strong>T≈ô√≠da:</strong> ${studentClass}</p>
    <p><strong>Datum:</strong> ${testDate}</p>
  </div>`;

      selectedQuestions.forEach((item, index) => {
        const answer = userAnswers[index] || '';
        content += `
  <div class="question">
    <p class="question-text">${index + 1}. ${item.q}</p>
    <div class="answer-field">${answer || '&nbsp;'}</div>
    <p class="points">Bod≈Ø: _____</p>
  </div>`;
      });

      content += `
  <div class="summary">
    <h2>HODNOCEN√ç</h2>
    <p><strong>Celkem bod≈Ø:</strong> __________</p>
    <p><strong>Maxim√°ln√≠ poƒçet bod≈Ø:</strong> __________</p>
    <p><strong>Zn√°mka:</strong> __________</p>
    <p><strong>Koment√°≈ô uƒçitele:</strong></p>
    <div style="border: 1px solid #ccc; min-height: 50px; margin-top: 6px; background: #fafafa;"></div>
  </div>
</body>
</html>`;

      const blob = new Blob([content], { type: 'application/msword' });
      const url = URL.createObjectURL(blob);
      const link = document.createElement('a');
      link.href = url;
      link.download = 'test_biologie_' + studentName.replace(/\s+/g, '_') + '_' + testDate + '.doc';
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
      URL.revokeObjectURL(url);
    }
  </script>
</body>
</html>